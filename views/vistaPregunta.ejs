<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="../public/css/estilo.css" media="print" />
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404-Pregunta</title>
    <link rel="shortcut icon"  type="image/png" href="/Images/icono.png"/>
</head>
<!-- ------------------------------------------   HEADER  ------------------------------------------------------------------------------------------- -->


<div id="header">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <img src="/Images/logo.png" id="iconoHeader" width="150px">
            <a class="navbar-brand" href="http://localhost:3000/" style="font-size:x-large; margin-left: 50px;">Inicio</a>            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="http://localhost:3000/SinResponder"
                            style="font-size:x-large;"> Preguntas sin
                            responder</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="http://localhost:3000/usuarios"
                            style="font-size:x-large;">Usuarios</a>
                    </li>
                </ul>
                <ul class="navbar-nav  mb-4 mb-lg-0">
                    <div class="container">
                        <div class="row">
                            <div class="col col-3">
                                <img src="/Images/nico.png" id="iconoHeader" width="70" height="66"
                                    style="border-radius: 60%; margin-top: 10px;">
                            </div>
                            <div class="col col-3">
                                <a class="nav-link active" aria-current="page"
                                    style="font-size:x-large; margin-top: 10px;"
                                    href="http://localhost:3000/usuario/<%= email%>"><%= nombre%></a>
                            </div>
                            <div class="col col-6">
                                <form method="get" action="/desconectarse">
                                    <button class="btn btn-danger" type="submit"
                                        style="margin-top: 20px; float: right;border-width: 1px; border-color: black;">Cerrar
                                        Sesion</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </ul>
            </div>
        </div>
    </nav>
</div>


<!-- ------------------------------------------------------------------------------------------------------------------------------------- -->

<body style="background-image: url(/Images/fondo1.jpg);background-position: center center;
background-repeat: no-repeat;
background-attachment: fixed;
background-size: cover;
height: 100%;" ;>
    <br>

    <br>
    <br>
    <div class="container">
        <div class="row">
            <div class="col col-9" >
                <!-- Cuerpo de la pregunta-->
                <div class="card" style="border-color: rgb(3, 3, 27);">
                    <div class="card-body">

                        <h2 class="text-center"><%= pregunta.titulo%></h2>
                        <div class="row" style="margin-top: 40px;">
                            <h3 style="font-size: larger;">Descripción</h3>
                            <p style="font-size: larger;"><%= pregunta.cuerpo%></p>
                            <h3 style="font-size: larger;">Etiquetas</h3>
                            <div>
                                <% pregunta.tag.forEach(function(tag) { %>
                                <a class="card-text"
                                    style="font-size: 25px; color: rgb(190, 117, 20);text-decoration:none; margin-left: 20px;"><%= tag.tag%></a>
                                <% }); %>
                            </div>

                        </div>
                        <br><br>
                        <div class="row"><a href="http://localhost:3000/usuario/<%= pregunta.autor%>"
                                style="text-decoration:none;color:rgb(67, 68, 70);">De: <%= pregunta.autor%></a></div>
                        <br>
                        <div class="row">
                            <div class="container">
                                <div class="row">
                                    <div class="col col-6" style="text-align: left;">
                                        <p style="margin-right: 40px; color: rgb(158, 158, 158);"><%= pregunta.fecha%>
                                        </p>
                                    </div>
                                    <div class="col col-6">
                                        <a style="font-size: larger; margin-left: 15px;"><i class="bi bi-eye"></i>
                                            Visitas: <%= pregunta.visitas%></a>
                                            <% if(votadoN==null){ %>
                                                <form method="get" action="/PuntuarPregunta/<%= pregunta.id%>"
                                                    style="float: right;text-align: right;">
                                                    <input type="hidden" name="puntos" value=-1>
                                                    <button type="submit"
                                                        style="border: 0ch;background-color:rgb(252, 252, 252);">
                                                        <i class="bi bi-hand-thumbs-down"
                                                            style="color: rgb(131, 12, 12);font-size: large;"></i></button>
                                                </form>                                               <% } ; %>

                                                <% if(votadoN!=null){ %>
                                                        <button type="submit"
                                                            style="border: 0ch;background-color:rgb(252, 252, 252); float: right;">
                                                            <i class="bi bi-hand-thumbs-down-fill"
                                                                style="color: rgb(131, 12, 12);font-size: large; "></i></button>                                        <% } ; %>
                                            <% if(votado==null){ %>
                                                <form method="get" action="/PuntuarPregunta/<%= pregunta.id%>" style="float: right;">
                                                    <input type="hidden" name="puntos" value=1>
                                                    <button type="submit"
                                                        style="border: 0ch;background-color:rgb(252, 252, 252);">
                                                        <i class="bi bi-hand-thumbs-up"
                                                            style="color: rgb(19, 122, 10); font-size: large;"></i></button>
                                                </form>                                            <% } ; %>
                                            
                                            <% if(votado!=null){ %>
                                                    <button type="submit"
                                                        style="border: 0ch;background-color:rgb(252, 252, 252); float: right;">
                                                        <i class="bi bi-hand-thumbs-up-fill"
                                                            style="color: rgb(19, 122, 10); font-size: large;"></i></button>                                        <% } ; %>
                                        
                                        
                                        <p style="float: right;font-size: larger;"> Votos: <%= pregunta.puntos%></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <% if(votadoN!=null){ %>
                            <p class="text-center" style="float: right; color: rgb(224, 28, 28);">Ya has votado negativamente esta pregunta.</p>
                        <% } ; %>
                        <% if(votado!=null){ %>
                            <p class="text-center" style="float: right; color: rgb(13, 119, 18);">Ya has votado positivamente esta pregunta</p>
                        <% } ; %>

                    </div>
                </div>
            </div>
            <div class="col col-3">
                <!-- Cuerpo de tu respuesta-->
                <div class="card"  style="border-color: blue; width: auto;">
                    <div class="card-body">
                        <form method=" get" action="/CrearRespuesta/<%= pregunta.id%>">
                            <div class="mb-3">
                                <h5 for="exampleInputEmail1" class="form-label">Formular respuesta</h5>
                                <p class="card-text" style="color: rgb(58, 56, 56);">Contesta a la pregunta de la forma
                                    mas clara posible</p>
                                <textarea class="form-control" name="texto" id="texto" rows="7"
                                    placeholder="Escriba aqui su respuesta..." required></textarea>
                            </div>
                            <div class="mb-3" style="text-align: center;">
                                <br>
                                <button class="btn btn-outline-success" type="submit">Crear pregunta</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <br><br>
        <div class="row">
            <h2><%= respuestas.length%> respuestas</h2>
            <% respuestas.forEach(function(respuesta) { %>
            <div class="col col-8">
                <!-- Cuerpo de la pregunta-->
                <div class="card" style="border-color: rgb(3, 3, 27);">
                    <div class="card-body">
                        <div class="row">
                            <h3 style="font-size: larger;">Descripción</h3>
                            <p style="font-size: larger;"><%= respuesta.texto%></p>

                        </div>
                        <br>
                        <div class="row"><a href="http://localhost:3000/usuario/<%= respuesta.autor%>"
                                style="text-decoration:none;color:rgb(67, 68, 70);">De: <%= respuesta.autor%></a></div>
                        <br>

                        <div class="row">
                            <div class="container">
                                <div class="row">
                                    <div class="col col-6" style="text-align: left;">
                                        <p style="margin-right: 40px; color: rgb(158, 158, 158);"><%= respuesta.fecha%>
                                        </p>
                                    </div>
                                    <div class="col col-6">
                                        <% if(votadoRN==null){ %>
                                            <form method="get" action="/PuntuarRespuesta/<%= respuesta.id%>"
                                                style="float: right;text-align: right;">
                                                <input type="hidden" name="puntos" value=-1>
                                                <button type="submit"
                                                    style="border: 0ch;background-color:rgb(252, 252, 252);">
                                                    <i class="bi bi-hand-thumbs-down"
                                                        style="color: rgb(131, 12, 12);font-size: large;"></i></button>
                                            </form>                                               <% } ; %>

                                            <% if(votadoRN!=null){ %>
                                                <form method="get" action=""
                                                    style="float: right;text-align: right;">
                                                    <input type="hidden" name="puntos" value=-1>
                                                    <button type="submit"
                                                        style="border: 0ch;background-color:rgb(252, 252, 252);">
                                                        <i class="bi bi-hand-thumbs-down-fill"
                                                            style="color: rgb(131, 12, 12);font-size: large;"></i></button>
                                                </form>                                            <% } ; %>
                                        <% if(votadoR==null){ %>
                                            <form method="get" action="/PuntuarRespuesta/<%= respuesta.id%>"
                                                style="float: right;">
                                                <input type="hidden" name="puntos" value=1>
                                                <button type="submit"
                                                    style="border: 0ch;background-color:rgb(252, 252, 252);">
                                                    <i class="bi bi-hand-thumbs-up"
                                                        style="color: rgb(19, 122, 10); font-size: large;"></i></button>
                                            </form>                                            <% } ; %>
                                        
                                        <% if(votadoR!=null){ %>
                                            <form method="get" action=""
                                                style="float: right;">
                                                <input type="hidden" name="puntos" value=1>
                                                <button type="submit"
                                                    style="border: 0ch;background-color:rgb(252, 252, 252);">
                                                    <i class="bi bi-hand-thumbs-up-fill"
                                                        style="color: rgb(19, 122, 10); font-size: large;"></i></button>
                                            </form>                                            <% } ; %>
                                        <p style="float: right;font-size: larger;"> Votos: <%= respuesta.puntos%></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <% if(votadoRN!=null){ %>
                            <p class="text-center" style="float: right; color: rgb(224, 28, 28);">Ya has votado negativamente esta respuesta.</p>
                        <% } ; %>
                        <% if(votadoR!=null){ %>
                            <p class="text-center" style="float: right; color: rgb(13, 119, 18);">Ya has votado positivamente esta respuesta</p>
                        <% } ; %>
                    </div>
                </div>
                <br>
            </div>
            <% }); %>
        </div>


    </div>

    <br><br><br>
</body>

</html>